<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Brain and Dementia Guide</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f0f0;
        }
        canvas { display: block; }
        #info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 380px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            z-index: 100;
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 40px);
        }
        #info-panel h2 {
            margin: 0 0 15px 0;
            font-size: 26px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        #info-content {
            font-size: 16px;
            line-height: 1.7;
            color: #34495e;
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        #navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }
        #navigation button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #navigation button:hover {
            background-color: #2980b9;
        }
        #navigation button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        #progress-indicator {
            font-size: 16px;
            font-weight: bold;
            color: #7f8c8d;
        }
        #loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #333;
            z-index: 999;
        }
    </style>
</head>
<body>

    <div id="info-panel">
        <h2 id="slide-title">Title</h2>
        <p id="info-content">Informative content...</p>
        <div id="navigation">
            <button id="prev-button">Previous</button>
            <span id="progress-indicator">1 / N</span>
            <button id="next-button">Next</button>
        </div>
    </div>

    <div id="loading-screen">
        <p>Loading 3D model and information...</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // --- Basic Three.js scene setup ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color('#dbe9ff');

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 4, 18);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.target.set(0, 2, 0);

        // --- Lighting ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
        directionalLight.position.set(15, 20, 10);
        directionalLight.castShadow = true;
        scene.add(directionalLight);

        // --- Variables for presentation logic ---
        let brainModel;
        const loader = new THREE.GLTFLoader();
        const loadingScreen = document.getElementById('loading-screen');
        
        const titleElement = document.getElementById('slide-title');
        const contentElement = document.getElementById('info-content');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const progressIndicator = document.getElementById('progress-indicator');
        
        let originalMaterials = {};
        let highlightedObject = null;
        const highlightMaterial = new THREE.MeshStandardMaterial({
            color: 0x3498db,
            emissive: 0x3498db,
            emissiveIntensity: 0.7,
            metalness: 0.2,
            roughness: 0.5
        });

        // --- Informative Presentation Content ---
        const slides = [
            {
                title: "The Human Brain",
                text: "Welcome to this interactive guide! The brain is the body's most complex organ, the control center for everything we do, think, and feel. We will explore its main components and understand conditions like dementia. Use your mouse to rotate the 3D model.",
                targetObjectName: null
            },
            {
                title: "The Frontal Lobe",
                text: "This is the center of personality and executive functions. It is responsible for reasoning, planning, problem-solving, speech (Broca's Area), and the control of voluntary movements. Lesions here can affect personality and decision-making ability.",
                targetObjectName: "FrontalLobe"
            },
            {
                title: "The Parietal Lobe",
                text: "It processes sensory information such as touch, temperature, pain, and pressure. It also plays a crucial role in spatial orientation, navigation, and understanding numbers. It helps us perceive the world around us and interact with it.",
                targetObjectName: "ParietalLobe"
            },
            {
                title: "The Temporal Lobe",
                text: "Essential for processing auditory information, memory, and language comprehension (Wernicke's Area). This is where long-term memories are formed and stored. It is one of the first areas affected in Alzheimer's disease, explaining early memory loss.",
                targetObjectName: "TemporalLobe"
            },
            {
                title: "The Occipital Lobe",
                text: "The brain's primary visual processing center. It interprets everything we see: colors, shapes, and movement. Lesions in this area can lead to difficulties recognizing objects or even cortical blindness.",
                targetObjectName: "OccipitalLobe"
            },
            {
                title: "The Cerebellum",
                text: "Also known as the 'little brain,' the cerebellum is vital for coordination, balance, posture, and the precision of movements. While it doesn't initiate movement, it adjusts and refines it, allowing us to walk, run, or write smoothly.",
                targetObjectName: "Cerebellum"
            },
            {
                title: "What is Dementia?",
                text: "Dementia is not a specific disease, but a general term (a syndrome) that describes a decline in cognitive functions (thinking, memory, reasoning) severe enough to interfere with daily life. There are several causes of dementia.",
                targetObjectName: null
            },
            {
                title: "Alzheimer's Disease",
                text: "Alzheimer's disease is the most common cause of dementia, accounting for 60-80% of cases. It is a progressive brain disease characterized by the accumulation of two abnormal proteins: beta-amyloid plaques (between neurons) and tau protein tangles (inside neurons).",
                targetObjectName: null
            },
            {
                title: "How Does Alzheimer's Affect the Brain?",
                text: "These toxic proteins disrupt communication between neurons and lead to their death. The process usually begins in areas responsible for memory, like the temporal lobe, and gradually spreads to other parts of the brain, causing a wide range of symptoms.",
                targetObjectName: "TemporalLobe"
            },
            {
                title: "Symptoms of Alzheimer's",
                text: "Symptoms evolve over time. Initially, recent memory loss and difficulty finding words appear. In advanced stages, patients may experience severe confusion, personality changes, difficulty performing simple tasks, and loss of communication ability.",
                targetObjectName: null
            },
            {
                title: "Free Exploration",
                text: "You now have a basic understanding of the main brain structures and how conditions like Alzheimer's can affect them. Use this time to explore the 3D model from any angle. Knowledge is the first step in the fight against these diseases.",
                targetObjectName: null
            }
        ];
        let currentSlideIndex = 0;

        // --- Loading the 3D model ---
        loader.load('brain.glb', (gltf) => {
            brainModel = gltf.scene;
            brainModel.scale.set(1.2, 1.2, 1.2);
            brainModel.position.set(0, 2, 0);

            brainModel.traverse((node) => {
                if (node.isMesh) {
                    node.castShadow = true;
                    node.receiveShadow = true;
                    originalMaterials[node.name] = node.material;
                }
            });
            
            scene.add(brainModel);
            loadingScreen.style.display = 'none';
            displaySlide(currentSlideIndex);
        }, undefined, (error) => {
            console.error('Error loading the model:', error);
            loadingScreen.innerHTML = 'Error loading the 3D model.';
        });

        // --- Functions for logic ---
        function displaySlide(index) {
            const slide = slides[index];
            titleElement.textContent = slide.title;
            contentElement.textContent = slide.text;
            contentElement.scrollTop = 0;

            progressIndicator.textContent = `${index + 1} / ${slides.length}`;
            prevButton.disabled = (index === 0);
            nextButton.disabled = (index === slides.length - 1);

            highlightObjectByName(slide.targetObjectName);
        }

        function highlightObjectByName(name) {
            // Reset the material of the previous object
            if (highlightedObject) {
                highlightedObject.material = originalMaterials[highlightedObject.name];
                highlightedObject = null;
            }

            if (name && brainModel) {
                const objectToHighlight = brainModel.getObjectByName(name);
                if (objectToHighlight) {
                    highlightedObject = objectToHighlight;
                    highlightedObject.material = highlightMaterial;
                }
            }
        }
        
        // --- Event Listeners for buttons ---
        nextButton.addEventListener('click', () => {
            if (currentSlideIndex < slides.length - 1) {
                currentSlideIndex++;
                displaySlide(currentSlideIndex);
            }
        });

        prevButton.addEventListener('click', () => {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                displaySlide(currentSlideIndex);
            }
        });

        // --- Animation loop ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
