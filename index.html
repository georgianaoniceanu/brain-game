<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghid Interactiv al Creierului și Demenței</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f0f0;
        }
        canvas { display: block; }
        #info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 380px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
            z-index: 100;
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 40px);
        }
        #info-panel h2 {
            margin: 0 0 15px 0;
            font-size: 26px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        #info-content {
            font-size: 16px;
            line-height: 1.7;
            color: #34495e;
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        #navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }
        #navigation button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #navigation button:hover {
            background-color: #2980b9;
        }
        #navigation button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        #progress-indicator {
            font-size: 16px;
            font-weight: bold;
            color: #7f8c8d;
        }
        #loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: #333;
            z-index: 999;
        }
    </style>
</head>
<body>

    <div id="info-panel">
        <h2 id="slide-title">Titlu</h2>
        <p id="info-content">Conținut informativ...</p>
        <div id="navigation">
            <button id="prev-button">Anteriorul</button>
            <span id="progress-indicator">1 / N</span>
            <button id="next-button">Următorul</button>
        </div>
    </div>

    <div id="loading-screen">
        <p>Se încarcă modelul 3D și informațiile...</p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // --- Configurarea de bază a scenei Three.js ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color('#dbe9ff');

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 4, 18);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.outputEncoding = THREE.sRGBEncoding;
        document.body.appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.target.set(0, 2, 0);

        // --- Iluminare ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
        directionalLight.position.set(15, 20, 10);
        directionalLight.castShadow = true;
        scene.add(directionalLight);

        // --- Variabile pentru logica prezentării ---
        let brainModel;
        const loader = new THREE.GLTFLoader();
        const loadingScreen = document.getElementById('loading-screen');
        
        const titleElement = document.getElementById('slide-title');
        const contentElement = document.getElementById('info-content');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const progressIndicator = document.getElementById('progress-indicator');
        
        let originalMaterials = {};
        let highlightedObject = null;
        const highlightMaterial = new THREE.MeshStandardMaterial({
            color: 0x3498db,
            emissive: 0x3498db, // Culoare de "strălucire"
            emissiveIntensity: 0.7,
            metalness: 0.2,
            roughness: 0.5
        });

        // --- Conținutul Informativ al Prezentării ---
        const slides = [
            {
                title: "Creierul Uman",
                text: "Bine ai venit la acest ghid interactiv! Creierul este cel mai complex organ al corpului, centrul de control pentru tot ce facem, gândim și simțim. În continuare, vom explora principalele sale componente și vom înțelege afecțiuni precum demența. Folosește mouse-ul pentru a roti modelul 3D.",
                targetObjectName: null // Fără highlight la început
            },
            {
                title: "Lobul Frontal",
                text: "Acesta este centrul personalității și al funcțiilor executive. Este responsabil pentru raționament, planificare, rezolvarea problemelor, vorbire (Aria Broca) și controlul mișcărilor voluntare. Leziunile aici pot afecta personalitatea și capacitatea de a lua decizii.",
                targetObjectName: "FrontalLobe"
            },
            {
                title: "Lobul Parietal",
                text: "Procesează informațiile senzoriale precum atingerea, temperatura, durerea și presiunea. De asemenea, joacă un rol crucial în orientarea spațială, navigație și înțelegerea numerelor. Ne ajută să percepem lumea din jurul nostru și să interacționăm cu ea.",
                targetObjectName: "ParietalLobe"
            },
            {
                title: "Lobul Temporal",
                text: "Esențial pentru procesarea informațiilor auditive, memorie și înțelegerea limbajului (Aria Wernicke). Aici se formează și se stochează amintirile pe termen lung. Este una dintre primele zone afectate în boala Alzheimer, explicând pierderile de memorie timpurii.",
                targetObjectName: "TemporalLobe"
            },
            {
                title: "Lobul Occipital",
                text: "Centrul principal de procesare vizuală al creierului. Interpretează tot ce vedem: culori, forme, mișcare. Leziunile în această zonă pot duce la dificultăți în recunoașterea obiectelor sau chiar la orbire corticală.",
                targetObjectName: "OccipitalLobe"
            },
            {
                title: "Cerebelul",
                text: "Cunoscut și ca 'micul creier', cerebelul este vital pentru coordonare, echilibru, postură și precizia mișcărilor. Deși nu inițiază mișcarea, o ajustează și o rafinează, permițându-ne să mergem, să alergăm sau să scriem fără probleme.",
                targetObjectName: "Cerebellum"
            },
            {
                title: "Ce este Demența?",
                text: "Demența nu este o boală specifică, ci un termen general (un sindrom) care descrie o deteriorare a funcțiilor cognitive (gândire, memorie, raționament) suficient de severă pentru a afecta viața de zi cu zi. Există mai multe cauze ale demenței.",
                targetObjectName: null
            },
            {
                title: "Boala Alzheimer",
                text: "Boala Alzheimer este cea mai comună cauză a demenței, reprezentând 60-80% din cazuri. Este o boală progresivă a creierului caracterizată prin acumularea a două proteine anormale: plăci de beta-amiloid (între neuroni) și mase de proteină tau (în interiorul neuronilor).",
                targetObjectName: null
            },
            {
                title: "Cum afectează Alzheimer creierul?",
                text: "Aceste proteine toxice întrerup comunicarea dintre neuroni și duc la moartea acestora. Procesul începe de obicei în zonele responsabile pentru memorie, precum lobul temporal, și se extinde treptat la alte părți ale creierului, provocând o gamă largă de simptome.",
                targetObjectName: "TemporalLobe" // Re-iluminăm lobul temporal
            },
            {
                title: "Simptomele Alzheimer",
                text: "Simptomele evoluează în timp. La început, apar pierderi de memorie recentă și dificultăți în găsirea cuvintelor. În stadii avansate, pacienții pot experimenta confuzie severă, schimbări de personalitate, dificultăți în a îndeplini sarcini simple și pierderea capacității de a comunica.",
                targetObjectName: null
            },
            {
                title: "Explorare Liberă",
                text: "Acum ai o înțelegere de bază a principalelor structuri ale creierului și a modului în care afecțiuni precum Alzheimer le pot afecta. Folosește acest timp pentru a explora modelul 3D din orice unghi. Cunoașterea este primul pas în lupta împotriva acestor boli.",
                targetObjectName: null
            }
        ];
        let currentSlideIndex = 0;

        // --- Încărcarea modelului 3D ---
        loader.load('brain.glb', (gltf) => {
            brainModel = gltf.scene;
            brainModel.scale.set(1.2, 1.2, 1.2);
            brainModel.position.set(0, 2, 0);

            brainModel.traverse((node) => {
                if (node.isMesh) {
                    node.castShadow = true;
                    node.receiveShadow = true;
                    originalMaterials[node.name] = node.material;
                }
            });
            
            scene.add(brainModel);
            loadingScreen.style.display = 'none';
            displaySlide(currentSlideIndex);
        }, undefined, (error) => {
            console.error('Eroare la încărcarea modelului:', error);
            loadingScreen.innerHTML = 'Eroare la încărcarea modelului 3D.';
        });

        // --- Funcții pentru logică ---
        function displaySlide(index) {
            const slide = slides[index];
            titleElement.textContent = slide.title;
            contentElement.textContent = slide.text;
            contentElement.scrollTop = 0; // Resetează scroll-ul la început

            progressIndicator.textContent = `${index + 1} / ${slides.length}`;
            prevButton.disabled = (index === 0);
            nextButton.disabled = (index === slides.length - 1);

            highlightObjectByName(slide.targetObjectName);
        }

        function highlightObjectByName(name) {
            // Resetează materialul obiectului anterior
            if (highlightedObject) {
                highlightedObject.material = originalMaterials[highlightedObject.name];
                highlightedObject = null;
            }

            if (name && brainModel) {
                const objectToHighlight = brainModel.getObjectByName(name);
                if (objectToHighlight) {
                    highlightedObject = objectToHighlight;
                    highlightedObject.material = highlightMaterial;
                }
            }
        }
        
        // --- Event Listeners pentru butoane ---
        nextButton.addEventListener('click', () => {
            if (currentSlideIndex < slides.length - 1) {
                currentSlideIndex++;
                displaySlide(currentSlideIndex);
            }
        });

        prevButton.addEventListener('click', () => {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                displaySlide(currentSlideIndex);
            }
        });

        // --- Bucla de animație ---
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
